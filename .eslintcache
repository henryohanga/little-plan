[{"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/reportWebVitals.js":"1","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/App.js":"2","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Footer/Footer.js":"3","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Header/Header.js":"4","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Landing/Landing.js":"5","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/FormControl/FormControl.js":"6","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/data/formControls.js":"7","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Recommendations/Recommendations.js":"8"},{"size":362,"mtime":1611875893534,"results":"9","hashOfConfig":"10"},{"size":3660,"mtime":1611879006507,"results":"11","hashOfConfig":"10"},{"size":247,"mtime":1611877049405,"results":"12","hashOfConfig":"10"},{"size":199,"mtime":1611877103441,"results":"13","hashOfConfig":"10"},{"size":499,"mtime":1611877428154,"results":"14","hashOfConfig":"10"},{"size":1507,"mtime":1611878003744,"results":"15","hashOfConfig":"10"},{"size":1478,"mtime":1611877932958,"results":"16","hashOfConfig":"10"},{"size":213,"mtime":1611878942626,"results":"17","hashOfConfig":"10"},{"filePath":"18","messages":"19","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"1tbg3z0",{"filePath":"20","messages":"21","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"22"},{"filePath":"23","messages":"24","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"25","messages":"26","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"29","messages":"30","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/reportWebVitals.js",[],"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/App.js",["35","36","37"],"import React, { useEffect, useState } from 'react';\n\nimport Header from './components/Header/Header';\nimport Footer from './components/Footer/Footer';\nimport Landing from './components/Landing/Landing';\nimport FormGroup from './components/FormGroup/FormGroup';\nimport Recommendations from './components/Recommendations/Recommendations';\n\nimport { formControls } from './data/formControls';\n\nimport '@popsure/dirty-swan/dist/index.css';\n\nimport './App.scss';\n\nfunction App() {\n  const [controls, setControls] = useState(() =>\n    formControls.map((control) => ({ ...control, answer: '', errors: [] }))\n  );\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const [showForm, setShowForm] = useState(false);\n  const [isButtonLoading, setIsButtonLoading] = useState(false);\n\n  const [recommendations, setRecommendations] = useState([]);\n  const [hasToken, setHasToken] = useState(false);\n\n  const onFormUpdate = (controlName, value) => {\n    const updateControls = controls.map((control) => {\n      if (control.controlName === controlName) {\n        return { ...control, answer: value };\n      }\n\n      return control;\n    });\n\n    setControls(updateControls);\n  };\n\n  const goToNextControl = () => {\n    const currentControl = controls[currentIndex];\n    const potentialNext = controls[currentIndex + 1];\n\n    if (potentialNext.visibleOn?.previous) {\n      const { operation, value } = potentialNext.visibleOn.previous;\n      if (operation === 'eq') {\n        if (currentControl.answer === value) {\n          setCurrentIndex((currentIndex) => currentIndex + 1);\n        } else {\n          setCurrentIndex((currentIndex) => currentIndex + 2);\n        }\n      }\n    } else {\n      setCurrentIndex((currentIndex) => currentIndex + 1);\n    }\n  };\n  const onNext = () => {\n    if (currentIndex === controls.length - 1) {\n      onSubmit();\n    } else {\n      goToNextControl();\n    }\n\n    localStorage.setItem('formControls', JSON.stringify(controls));\n  };\n\n  useEffect(() => {\n    const formControls = JSON.parse(localStorage.getItem('formControls'));\n    let nextIndex = (formControls ?? []).findIndex((el) => !el.answer);\n\n    if (nextIndex >= 0) {\n      nextIndex = computeNextFromPrevious(nextIndex);\n\n      setCurrentIndex(nextIndex);\n\n      // unset errors\n      setControls(() =>\n        formControls.map((control) => ({ ...control, errors: [] }))\n      );\n\n      setShowForm(true);\n    }\n  }, []);\n\n  const computeNextFromPrevious = (nextIndex) => {\n    const potentialNext = formControls[nextIndex];\n    const previous = formControls[nextIndex - 1];\n\n    if (potentialNext.visibleOn?.previous) {\n      const { operation, value } = potentialNext.visibleOn?.previous;\n\n      if (operation === 'eq') {\n        if (previous.answer !== value) {\n          nextIndex += 1;\n        }\n      }\n    }\n\n    return nextIndex;\n  };\n\n  const onSubmit = () => {\n    console.log('Submit');\n  };\n\n  return (\n    <div className=\"d-flex App ws8\">\n      <Header onClear={() => {}} />\n\n      <main className=\"App-main\">\n        {hasToken ? (\n          <Recommendations recommendations={recommendations} />\n        ) : (\n          <React.Fragment>\n            {showForm ? (\n              <FormGroup\n                controls={controls}\n                currentIndex={currentIndex}\n                onNext={onNext}\n                onFormUpdate={onFormUpdate}\n                onFormSubmitted={onSubmit}\n                isButtonLoading={isButtonLoading}\n              />\n            ) : (\n              <Landing onGetStarted={() => setShowForm(true)} />\n            )}\n          </React.Fragment>\n        )}\n      </main>\n\n      <Footer />\n    </div>\n  );\n}\n\nexport default App;\n","/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Footer/Footer.js",[],"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Header/Header.js",[],"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Landing/Landing.js",[],"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/FormControl/FormControl.js",[],"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/data/formControls.js",[],"/Volumes/Particles/Development/FeatherInsurance/little-plan/src/components/Recommendations/Recommendations.js",[],{"ruleId":"38","severity":1,"message":"39","line":22,"column":27,"nodeType":"40","messageId":"41","endLine":22,"endColumn":45},{"ruleId":"38","severity":1,"message":"42","line":24,"column":27,"nodeType":"40","messageId":"41","endLine":24,"endColumn":45},{"ruleId":"38","severity":1,"message":"43","line":25,"column":20,"nodeType":"40","messageId":"41","endLine":25,"endColumn":31},"no-unused-vars","'setIsButtonLoading' is assigned a value but never used.","Identifier","unusedVar","'setRecommendations' is assigned a value but never used.","'setHasToken' is assigned a value but never used."]